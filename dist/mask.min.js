
/*!
 * mask - Javascript input mask plugin
 * v0.0.1
 * https://github.com/firstandthird/mask
 * copyright First + Third 2014
 * MIT License
*/
!function(){$.declare("mask",{init:function(){var a=this;this.inputs=this.el.find("[data-mask]"),this.currPos=0,this.isBackspace=!1,this.inputs.each(function(){var b=$(this);b.on(("oninput"in document.createElement("input")?"input.mask":"keyup.mask")+" click.mask",a.proxy(a.handleInput)),b.on("keydown.mask",function(b){8===b.which&&(a.isBackspace=!0)})}),this.inputs.trigger("input")},getCursorPosition:function(a){var b=a.get(0);if(b)return document.selection&&b.focus(),"selectionStart"in b?b.selectionStart:""||Math.abs(document.selection.createRange().moveStart("character",-b.value.length))},setCursorPosition:function(a,b){var c=a.get(0);if(c.setSelectionRange)c.setSelectionRange(b,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select()}},handleInput:function(a){var b=$(a.target),c=b.data("mask"),d=b.data("mask-regex"),e=b.val();this.currPos=this.getCursorPosition(b),b.val(this.parse(c,e,this.currPos,a,d)),this.setCursorPosition(b,this.currPos)},parse:function(a,b,c,d,e){if("object"!=typeof this[a])return"";d=d||$.Event("api"),c=c||0;var f=this[a];b=b||f.mask,e=e||f.regex;var g,h,i=f.mask,j=[],k=0,l=b.length-i.length;this.isBackspace&&(b=b.substr(0,c)+"_"+b.substr(c)),"click"===d.type&&(b!==i&&!f.strict||-1===i.indexOf("_")||(this.currPos=i.indexOf("_"),c=this.currPos)),0>l&&(l=0),"api"!==d.type&&(b=b.split(""),b.splice(c,l),b=b.join(""));var m=b.match(e);if(m)for(g=0,h=m.length;h>g;g++)j.push(m[g]);for(j=j.join(""),g=0,h=j.length;h>g&&(""!==i.charAt(g+k)||!f.strict);g++)"_"!==i.charAt(g+k)&&f.strict?(k++,g--):i=i.substr(0,g+k)+j.charAt(g)+i.substr(g+k+1);return"_"!==i.charAt(c)&&!this.isBackspace&&f.strict&&this.currPos++,this.isBackspace=!1,"function"==typeof f.format&&(i=f.format(i)),i},ssn:{mask:"___-__-____",strict:!0,regex:/[\d_]/g},phone:{mask:"(___) ___-____",strict:!0,regex:/[\d_]/g},email:{mask:"___@___.___",strict:!1,regex:/[\w_@\.\+]/g},number:{mask:"",strict:!1,regex:/[\d_\.]/g,format:function(a){return a}}})}();