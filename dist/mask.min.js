
/*!
 * mask - Javascript input mask plugin
 * v0.1.0
 * https://github.com/firstandthird/mask
 * copyright First + Third 2014
 * MIT License
*/
!function(){$.declare("mask",{init:function(){var a=this;this.inputs=this.el.find("[data-mask]"),this.currPos=0,this.supportedInputEvent="input.mask click.mask",this.inputs.each(function(){var b=$(this);b.on(a.supportedInputEvent,a.proxy(a.handleInput))}),this.inputs.trigger("input")},getCursorPosition:function(a){var b=a.get(0);if(b)return document.selection&&b.focus(),"selectionStart"in b?b.selectionStart:""||Math.abs(document.selection.createRange().moveStart("character",-b.value.length))},setCursorPosition:function(a,b){var c=a.get(0);if(c.setSelectionRange)c.setSelectionRange(b,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select()}},handleInput:function(a){var b=$(a.target),c=b.data("mask"),d=b.data("mask-regex"),e=b.val();this.currPos=this.getCursorPosition(b),b.val(this.parse(c,e,this.currPos,d)),this.setCursorPosition(b,this.currPos)},parse:function(a,b,c,d){if("object"!=typeof this[a])return"";c=c||0;var e=this[a];b=b||e.mask,d=d||e.regex;var f,g,h=e.mask,i=b.length-h.length,j=[],k=0;0>i&&(i=0),b=b.split(""),b.splice(c,i),b=b.join("");var l=b.match(d);if(l)for(f=1,g=l.length;g>f;f++)j.push(l[f]);for(j=j.join("").split(""),f=0,g=j.length;g>f&&!(""===h.charAt(f+k)||f+k>h.length);f++)"_"===h.charAt(f+k)?h=h.substr(0,f+k)+j[f]+h.substr(f+k+1):(k++,f--);return b=h,"_"!==b.charAt(c),b},ssn:{mask:"___-__-____",regex:/([\d_]{3})-?([\d_]{2})?-?([\d_]{4})?/},phone:{mask:"(___) ___-____",regex:/\(([\d_]{3})?\) ([\d_]{3})?-?([\d_]{4})?/},email:{mask:"___@___.___",regex:/(\w+@[\w\.\w]+)/}})}();